<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claim Code | Justin's Skillz</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 flex items-center justify-center min-h-screen p-4">
    <div class="max-w-md w-full bg-white p-12 rounded-[3rem] text-center shadow-2xl">
        <img src="logo.jpg" class="h-16 mx-auto mb-8 rounded-xl">
        <h2 class="text-3xl font-black text-slate-800 uppercase tracking-tighter italic">Claim Code</h2>
        <div class="p-6 bg-blue-50 border border-blue-100 rounded-2xl text-[10px] text-blue-600 font-black font-mono animate-pulse">
            [ LISTENING FOR FREQUENCY... ]
        </div>
        <p class="mt-4 text-xs text-slate-400">Type a secret word anywhere on this page to claim your reward.</p>
        <a href="dashboard.html" class="mt-8 block text-[10px] font-bold text-slate-400 uppercase tracking-widest hover:text-blue-600">Back to Dashboard</a>
    </div>

    <script>
        const SB_URL = "https://xkvozzzamcolofmedrto.supabase.co";
        const SB_KEY = "sb_publishable__8qGVSppJs2gRDGm_uvVUA_4JXH-icx";
        const secrets = ["lambda", "quantum", "redstone", "polymath", "logic"];
        let typed = "";

        window.addEventListener('keydown', async (e) => {
            typed += e.key.toLowerCase();
            const found = secrets.find(s => typed.endsWith(s));
            if (found) {
                const name = prompt("ðŸ”¥ SECRET FOUND: " + found.toUpperCase() + "\nEnter your name:");
                if (name) {
                    const code = `JS-${found.toUpperCase()}-${Math.floor(1000 + Math.random() * 9000)}`;
                    await fetch(`${SB_URL}/rest/v1/discount_records`, {
                        method: "POST",
                        headers: { "apikey": SB_KEY, "Authorization": `Bearer ${SB_KEY}`, "Content-Type": "application/json" },
                        body: JSON.stringify({ user_name: name, secret_word: found, final_code: code })
                    });
                    alert("CLAIMED! Your code is: " + code);
                    window.location.href = "index.html";
                }
                typed = "";
            }
        });
    </script>
</body>
</html>
