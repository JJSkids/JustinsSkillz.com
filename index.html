<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Justin's Skillz | Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50" onload="loadLeaderboard()">
    <nav class="fixed top-0 w-full z-50 bg-white/90 backdrop-blur-md border-b px-6 py-4 flex justify-between items-center shadow-sm">
        <div class="flex items-center gap-3">
            <img src="logo.jpg" class="h-10 w-10 rounded-lg shadow-sm">
            <span class="font-black text-slate-800 tracking-tighter uppercase text-sm md:text-xl">JUSTINSSKILLZ</span>
        </div>
        <a href="signin.html" class="bg-blue-600 text-white px-5 py-2 rounded-xl text-xs font-black uppercase shadow-lg hover:bg-blue-700">Sign In</a>
    </nav>

    <main class="max-w-7xl mx-auto px-6 pt-32 pb-20">
        <div class="text-center mb-16">
            <h1 class="text-5xl md:text-7xl font-black mb-4 tracking-tight">The <span class="text-blue-600 italic">Hub</span></h1>
            <p class="text-slate-500 font-medium">Real-time learning rewards and technical labs.</p>
        </div>

        <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="leaderboard-container">
            </section>
    </main>

    <script>
        const SB_URL = "https://xkvozzzamcolofmedrto.supabase.co";
        const SB_KEY = "sb_publishable__8qGVSppJs2gRDGm_uvVUA_4JXH-icx";

        async function loadLeaderboard() {
            const container = document.getElementById('leaderboard-container');
            const res = await fetch(`${SB_URL}/rest/v1/discount_records?select=user_name,final_code&order=id.desc&limit=4`, {
                headers: { "apikey": SB_KEY, "Authorization": `Bearer ${SB_KEY}` }
            });
            const data = await res.json();
            container.innerHTML = data.map(u => `
                <div class="bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex items-center gap-4 hover:scale-105 transition-transform">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=${u.user_name}" class="w-12 h-12">
                    <div>
                        <div class="font-black text-slate-800">${u.user_name}</div>
                        <div class="text-[9px] text-blue-600 font-bold uppercase tracking-widest">${u.final_code}</div>
                    </div>
                </div>`).join('');
        }
    </script>
</body>
</html>
